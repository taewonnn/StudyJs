// Promise_ex

// ðŸƒðŸƒðŸƒ ë¦´ë ˆì´ ì˜ˆì œ
// ì² ìˆ˜, ì˜í¬, ëŒì¤€, ì •ì•„, ê¸¸ëˆì´ ì¹˜ë¡€ë¡œ ì´ì–´ë‹¬ë¦¬ê¸°ëŠ” í•˜ëŠ” ì½”ë“œ
// â­ ê° ê³¨ì¸ì‹œê°„ ê¸°ë¡ - ì´ì „ ì½œë°±í•¨ìˆ˜ì˜ ê²°ê³¼ê°€ ë‹¤ìŒ ì½œë°±í•¨ìˆ˜ë¡œ ë„˜ê²¨ì ¸ ì¶•ì ë¨
// í•œ ì£¼ìžë¼ë„ ë°ë“œë¼ì¸(ë°€ë¦¬ì´ˆ)ì„ ë„˜ê¸°ë©´ ì‹¤íŒ¨ - ì£¼ìžë§ˆë‹¤ ë‹¤ë¥¸ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥
// ì™„ì£¼ ì‹¤íŒ¨ì‹œ ðŸ˜¢ ì™„ì£¼ ì‹¤íŒ¨ - ${ì „ì²´ ì†Œìš”ì‹œê°„} ì¶œë ¥
// ì‹¤íŒ¨ë“  ì„±ê³µì´ë“  ë§ˆì§€ë§‰ì— - - ê²½ê¸° ì¢…ë£Œ - - ì¶œë ¥



const DEADLINE = 1400;

function relayRun (name, start, nextFunc, failMsg) {
  console.log(`ðŸ‘Ÿ ${name} ì¶œë°œ`);
  const time = 1000 + Math.random() * 500;

  setTimeout(() => {
    if (time < DEADLINE) {
      console.log(`ðŸš© ${name} ë„ì°© - ${(start + time)/1000}ì´ˆ`);
      nextFunc?.(start + time);

    } else {
      console.log(failMsg);
      console.log(`ðŸ˜¢ ì™„ì£¼ ì‹¤íŒ¨ - ${(start + time)/1000}ì´ˆ`);
    }

    if (time >= DEADLINE || !nextFunc) {
      console.log('- - ê²½ê¸° ì¢…ë£Œ - -');
    }
  }, time);
}
